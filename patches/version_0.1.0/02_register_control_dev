--- linux-last/drivers/md/dm-ioctl.c	Thu Nov  1 13:20:44 2001
+++ linux/drivers/md/dm-ioctl.c	Thu Nov  1 13:30:58 2001
@@ -259,21 +259,32 @@
 	ioctl:		ctl_ioctl,
 };
 
+
+static devfs_handle_t _ctl_handle;
+
 static int dm_ioctl_init(void)
 {
 	int r;
 
+
 	if ((r = devfs_register_chrdev(DM_CHAR_MAJOR, "device-mapper",
 				       &_ctl_fops)) < 0) {
 		WARN("devfs_register_chrdev failed for dm control dev");
 		return -EIO;
 	}
 
+	_ctl_handle = devfs_register(0 , "device-mapper/control", 0,
+				     DM_CHAR_MAJOR, 0,
+				     S_IFCHR | S_IRUSR | S_IWUSR | S_IRGRP,
+				     &_ctl_fops, NULL);
+
 	return r;
 }
 
 static void dm_ioctl_exit(void)
 {
+	// FIXME: remove control device
+
 	if (devfs_unregister_chrdev(DM_CHAR_MAJOR, "device-mapper") < 0)
 		WARN("devfs_unregister_chrdev failed for dm control device");
 }
